<?xml version="1.0"?>
<configuration>

    <system.web>
      <compilation debug="true" targetFramework="4.5" />
      <httpRuntime targetFramework="4.5" />
    </system.web>

    <system.webServer>
      <modules runAllManagedModulesForAllRequests="true"/>
      <directoryBrowse enabled="true"/>
    </system.webServer>

    <system.serviceModel>

      <bindings>
        <wsDualHttpBinding>
          <binding name="wsDualHttpBinding">
            <security mode="Message">
              <message clientCredentialType="UserName"/>
            </security>
          </binding>
        </wsDualHttpBinding>
      </bindings>

      <behaviors>
        <serviceBehaviors>
          <behavior name="ServiceBehaviors">
            <serviceMetadata 
              httpGetEnabled="true" 
              httpsGetEnabled="true"/>
            <serviceDebug 
              includeExceptionDetailInFaults="false" />
            <serviceAuthorization 
              principalPermissionMode="UseAspNetRoles" />

            <serviceCredentials>
              <userNameAuthentication 
                userNamePasswordValidationMode="Custom"
                customUserNamePasswordValidatorType="NotifyService.CustomUserNameValidator, NotifyService"/>

              <serviceCertificate
                findValue="localhost"
                storeLocation="CurrentUser"
                storeName="My"
                x509FindType="FindBySubjectName" />

            </serviceCredentials>
            
          </behavior>
        </serviceBehaviors>
      </behaviors>

      <services>
        <service 
          name="NotifyService.BroadcastService" 
          behaviorConfiguration="ServiceBehaviors">
          <endpoint 
            binding="wsDualHttpBinding"
            contract="NotifyService.IBroadcastService"/>
          <endpoint
            address="mex"
            binding="mexHttpBinding"
            contract="IMetadataExchange"/>
        </service>
      </services>

    </system.serviceModel>

</configuration>
